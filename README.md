### HTML到Markdown转换任务说明

#### 任务目标

将 `/d:/github/aka/akaedu/book/html-chunk/` 目录下的HTML文件转换为 `/d:/github/aka/my-app2/docs/` 目录下的Markdown文档。

#### 文件对应关系

1. 章节文件：
   - 主章节文件：
     - 源文件：`chxx.html`（如 ch23.html）
     - 目标文件：`chxx/index.md`（如 ch23/index.md）
   - 子章节文件：
     - 源文件：`chxxsxx.html`（如 ch23s01.html）
     - 目标文件：`chxx/sxx.md`（如 ch23/s01.md）

2. 特殊文件：
   - `index.html` → `index.md`（放在docs根目录）
   - `intro.xxx.html` → `intro/xxx.md`
   - `expr.xxx.html` → `expr/xxx.md`
   - `ptxx.html` → `ptxx.md`
   - `prxx.html` → `prxx.md`
   - `ixxx.html` → `ixxx.md`

#### 文件匹配规则

1. 精确匹配规则：
   - 主章节文件：使用正则表达式 `^ch\d{2}\.html$`
   - 子章节文件：使用正则表达式 `^ch\d{2}s\d{2}\.html$`
   - 特殊文件：使用正则表达式 `^(intro|expr|pt|pr|ix)\d{2}\.html$`

2. 文件搜索方法：
   - 优先使用 `grep_search` 工具进行精确匹配
   - 使用 `file_search` 工具进行模糊匹配
   - 使用 `list_dir` 工具查看目录结构
   - 使用 `codebase_search` 工具进行语义搜索

3. 文件验证步骤：
   - 检查文件名格式是否符合规则
   - 验证源文件和目标文件的对应关系
   - 确认文件编码和格式
   - 检查文件权限

4. 目录处理规则：
   - 在创建任何文件之前，必须先检查目标目录是否存在
   - 使用 `list_dir` 工具检查目标目录
   - 如果目录已存在，直接使用现有目录
   - 如果目录不存在，才创建新目录
   - 记录目录创建或使用状态
   - 验证目录权限是否正确

#### 文件处理规则

1. 已存在文件判断标准：
   - 检查文件是否存在
   - 检查文件是否包含标题
   - 检查文件是否包含目录
   - 检查文件是否包含正文内容
   - 如果以上都满足,则认为文件内容完整

2. 链接格式规范：
   - 所有链接必须使用Markdown格式
   - 链接格式必须包含文件扩展名(.md)
   - 链接路径规则：
     - 章节内链接：`./sxx.md`
     - 跨章节链接：`../chxx/index.md` 或 `../chxx/sxx.md`
     - 图片链接：`../images/xxx`
   - 导航链接格式：
     - 上一章：`[上一章](../chxx/index.md)`
     - 目录：`[目录](../index.md)`
     - 下一章：`[下一章](../chxx/index.md)`
   - 目录链接格式：
     - 子章节：`[章节标题](./sxx.md)`
     - 子章节中的小节：`[小节标题](./sxx.md#小节id)`

3. 代码块转换标准：
   - 保持代码块的开始标记: ```language
   - 保持代码块的结束标记: ```
   - 保持代码的缩进格式
   - 保持代码的注释格式
   - 保持代码的高亮标记

4. 图片处理标准：
   - 检查图片文件是否存在
   - 检查图片路径是否正确
   - 保持图片的Markdown格式: ![alt](../path)
   - 保持图片的描述文本
   - 保持图片的尺寸标记

#### 转换规则

1. 内容转换：
   - 保持原文结构和内容不变
   - 仅转换格式（HTML到Markdown）
   - 代码块保持原格式
   - 表格保持原格式
   - 列表保持原格式
   - 保持原文的标题层级
   - 保持原文的引用格式
   - 保持原文的强调格式(粗体、斜体等)

2. 图片处理：
   - 图片路径更新为 `../images/xxx`
   - 不需要复制images文件夹
   - 需要验证图片链接是否正确
   - 检查图片文件名是否与源文件一致

3. 不需要转换的文件：
   - `styles.css`
   - 其他非HTML文件

#### 工作流程

1. 检查目标目录结构：
   - 确认目标文件夹是否存在
   - 如不存在则创建对应文件夹
   - 记录已创建的文件夹
   - 检查文件夹权限是否正确

2. 文件转换状态检查：
   - 在开始转换前检查目标文件是否已存在
   - 如果文件已存在，需要：
     - 读取现有文件内容
     - 与源文件内容进行对比
     - 如果内容不同，则覆盖重写
     - 如果内容相同，则跳过转换
   - 记录已转换的文件列表
   - 避免重复转换同一文件
   - 保持已转换文件的链接格式不变

3. 转换过程：
   - 读取源HTML文件
   - 转换为Markdown格式
   - 更新图片路径为 `../images/xxx` 格式
   - 更新所有链接为Markdown格式（包含.md扩展名）
   - 保存到目标位置
   - 记录已转换的文件
   - 检查文件编码(UTF-8)
   - 检查文件权限

4. 自动确认机制：
   - 转换完成后自动检查文件内容
   - 验证格式转换是否正确
   - 检查图片链接是否有效
   - 检查交叉引用是否正确
   - 如果检查通过,自动继续处理下一个文件
   - 如果发现问题,记录错误并继续处理下一个文件
   - 所有文件处理完成后生成错误报告

5. 验证步骤：
   - 检查文件是否成功生成
   - 验证内容是否准确转换
   - 确认图片链接是否正确
   - 检查格式是否正确
   - 检查章节结构是否完整
   - 检查代码块格式
   - 检查表格格式
   - 检查列表格式
   - 检查标题层级
   - 检查引用格式
   - 检查强调格式
   - 检查所有链接格式是否符合规范

6. 章节完整性检查：
   - 每完成一个章节后检查所有文件是否都已转换
   - 检查章节内的文件编号是否连续
   - 检查章节内的引用链接是否正确
   - 检查章节内的图片链接是否正确
   - 检查章节内的交叉引用是否正确
   - 检查章节内的代码示例是否完整

#### 注意事项

1. 保持原文的章节结构
2. 保持代码块的格式
3. 确保图片链接正确
4. 转换后需要验证内容准确性
5. 每完成一个章节后进行全面检查
6. 记录已完成的转换工作,避免重复
7. 保持转换过程的可追踪性
8. 确保转换质量的一致性
9. 保持原文的排版风格
10. 保持原文的术语使用

#### 错误处理

1. 如果转换过程中出现错误：
   - 记录错误信息
   - 尝试修复错误
   - 如果无法修复,标记为待处理
   - 继续处理其他文件
   - 记录错误发生的上下文
   - 记录错误修复的方法

2. 如果验证过程中发现问题：
   - 记录问题详情
   - 分析问题原因
   - 修复问题
   - 重新验证
   - 记录问题修复的过程
   - 更新问题解决记录

#### 进度跟踪

1. 记录已完成的工作：
   - 已转换的文件列表
   - 已完成的章节
   - 待处理的文件
   - 遇到的问题
   - 已解决的问题
   - 待解决的问题

2. 定期检查进度：
   - 检查转换完成率
   - 检查验证通过率
   - 检查问题解决率
   - 更新进度报告
   - 检查质量指标
   - 检查时间进度

#### 内容完整性检查

1. 文件内容检查：
   - 检查每个转换后的文件是否为空
   - 检查文件内容是否完整
   - 检查文件内容是否与源文件对应
   - 检查文件内容是否包含所有必要部分
   - 检查文件内容是否格式正确

2. 章节完整性检查：
   - 检查每个章节的所有子章节是否都已转换
   - 检查章节编号是否连续
   - 检查章节内容是否完整
   - 检查章节之间的引用是否正确
   - 检查章节的层级结构是否正确

3. 交叉引用检查：
   - 检查所有交叉引用链接是否有效
   - 检查引用格式是否正确
   - 检查引用目标是否存在
   - 检查引用内容是否准确
   - 检查引用路径是否正确

4. 图片引用检查：
   - 检查所有图片引用是否有效
   - 检查图片路径是否正确
   - 检查图片描述是否完整
   - 检查图片格式是否正确
   - 检查图片是否与内容相关

5. 代码示例检查：
   - 检查所有代码示例是否完整
   - 检查代码格式是否正确
   - 检查代码语法是否正确
   - 检查代码注释是否完整
   - 检查代码示例是否与内容相关

#### 自动化检查

1. 文件检查：
   - 自动检查文件是否为空
   - 自动检查文件编码
   - 自动检查文件权限
   - 自动检查文件格式
   - 自动检查文件内容完整性

2. 链接检查：
   - 自动检查所有链接是否有效
   - 自动检查图片链接
   - 自动检查交叉引用
   - 自动检查内部链接
   - 自动检查外部链接

3. 格式检查：
   - 自动检查Markdown语法
   - 自动检查代码块格式
   - 自动检查表格格式
   - 自动检查列表格式
   - 自动检查标题格式

4. 内容检查：
   - 自动检查内容完整性
   - 自动检查章节结构
   - 自动检查引用完整性
   - 自动检查图片完整性
   - 自动检查代码完整性

#### 自动化转换流程

1. 转换过程自动化：
   - 自动识别源文件夹中的所有HTML文件
   - 按照文件编号顺序进行转换
   - 自动确认转换结果
   - 自动创建目标文件夹结构
   - 自动保存转换后的文件

2. 转换顺序：
   - 优先转换主章节文件（chxx.html）
   - 然后转换子章节文件（chxxsxx.html）
   - 最后转换特殊文件（intro、expr等）
   - 按照文件编号顺序处理
   - 保持章节的完整性

3. 自动确认流程：
   - 每个文件转换完成后立即进行验证
   - 验证通过后自动处理下一个文件
   - 验证失败时记录错误并继续处理
   - 不需要人工确认每个文件的转换结果
   - 所有文件处理完成后生成总结报告

4. 转换过程记录：
   - 自动记录每个文件的转换状态
   - 记录转换开始和结束时间
   - 记录转换过程中的错误
   - 记录成功转换的文件列表
   - 记录失败的文件及原因

5. 转换完成报告：
   - 统计总文件数
   - 统计成功转换数
   - 统计失败文件数
   - 列出所有失败的文件
   - 提供错误原因分析
   - 提供转换时间统计

6. 错误处理自动化：
   - 自动记录错误信息
   - 自动尝试修复常见错误
   - 自动跳过无法修复的文件
   - 继续处理其他文件
   - 在报告中标记需要人工处理的文件

7. 验证过程自动化：
   - 自动执行所有检查步骤
   - 自动修复可修复的问题
   - 自动记录验证结果
   - 自动生成验证报告
   - 标记需要人工验证的文件

8. 进度显示：
   - 显示当前处理文件
   - 显示总体进度百分比
   - 显示预计剩余时间
   - 显示已处理文件数
   - 显示成功/失败统计

9. 转换完成后的操作：
   - 自动生成转换报告
   - 自动备份转换结果
   - 自动清理临时文件
   - 自动更新进度记录
   - 自动通知转换完成





### SEO基本配置

